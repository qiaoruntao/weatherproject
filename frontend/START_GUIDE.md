# ğŸš€ å‰ç«¯å¯åŠ¨æŒ‡å—

## âœ… å‰ç«¯å·²é…ç½®å®Œæˆï¼

å‰ç«¯ç°åœ¨å·²ç»é…ç½®ä¸ºä½¿ç”¨**çœŸå®åç«¯ API**ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®ã€‚

---

## ğŸ“ è®¿é—®åœ°å€

```
http://localhost:3000
```

---

## âš™ï¸ å½“å‰é…ç½®

### åç«¯ API
- **URL**: `https://o.qiaoruntao.com:4567/api`
- **æ¨¡å¼**: çœŸå®æ•°æ®ï¼ˆMock å·²ç¦ç”¨ï¼‰
- **Level**: `heightAboveGround`

### ç¯å¢ƒå˜é‡ (`.env.local`)
```bash
NEXT_PUBLIC_API_BASE_URL=https://o.qiaoruntao.com:4567/api
NEXT_PUBLIC_USE_MOCK=false
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=AIzaSyCZNy-8HXYFfPNHLJftsoJEo6UXI7OXan4
```

---

## ğŸ¯ ä½¿ç”¨æ­¥éª¤

### 1. æ‰“å¼€æµè§ˆå™¨
è®¿é—®: `http://localhost:3000`

### 2. é€‰æ‹©åæ ‡
- **æ–¹æ³• A**: åœ¨åœ°å›¾ä¸Šç‚¹å‡»ä»»æ„ä½ç½®
- **æ–¹æ³• B**: ä½¿ç”¨ "Coordinate Input" é¢æ¿æ‰‹åŠ¨è¾“å…¥
  - ä¾‹å¦‚: `Latitude: 43.65`, `Longitude: -79.38`

### 3. è®¾ç½®æŸ¥è¯¢å‚æ•°
- ç‚¹å‡» **"Time"** é¢æ¿å±•å¼€
- è®¾ç½®æ—¶é—´èŒƒå›´ï¼ˆé»˜è®¤ä¸ºä»Šå¤©ï¼‰:
  - Start Date: `2025-10-04`
  - End Date: `2025-10-04`
- é€‰æ‹©å˜é‡ï¼ˆå¯å¤šé€‰ï¼‰:
  - âœ… Temperature (t2m)
  - âœ… Wind (u10)
  - âœ… Pressure (pres)
  - âœ… Humidity (rh)

### 4. æ‰§è¡ŒæŸ¥è¯¢
- ç‚¹å‡» **"Query"** æŒ‰é’®
- ç­‰å¾…æ•°æ®åŠ è½½

### 5. æŸ¥çœ‹ç»“æœ
- **Results Panel** ä¼šæ˜¾ç¤ºæŸ¥è¯¢åˆ°çš„æ•°æ®
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

---

## ğŸ” é¢„æœŸè¡Œä¸º

### æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹
```
ğŸŒ ä½¿ç”¨çœŸå®åç«¯ API
ğŸ“ æŸ¥è¯¢åæ ‡: (43.6862, -79.1933)
ğŸ“… æ—¶é—´èŒƒå›´: 2025-10-04T00:00:00Z ~ 2025-10-04T23:59:59Z
ğŸ”¬ æŸ¥è¯¢å˜é‡: t2m
ğŸ”„ è°ƒç”¨åç«¯API: https://o.qiaoruntao.com:4567/api/api/query-data
ğŸ“¦ è¯·æ±‚å‚æ•°: {
  start_iso: "2025-10-04T00:00:00Z",
  end_iso: "2025-10-04T23:59:59Z",
  lon_min_0_360: 280.8066455078125,
  lon_max_0_360: 281.8066455078125,
  lat_min: 43.186154840875844,
  lat_max: 44.186154840875844,
  level: "heightAboveGround",
  variable: "t2m",
  indexpath: ""
}
âœ… åç«¯è¿”å›: { count: 3, results: [...] }
ğŸ” æŸ¥è¯¢å®Œæˆ: åæ ‡(43.6862, -79.1933), æ¥æº: map
ğŸ“Š ç»“æœ: 3 æ¡æ•°æ®, 1 ä¸ªæ–‡ä»¶
```

### API è¿”å›æ•°æ®ç¤ºä¾‹
```json
{
  "count": 3,
  "results": [
    {
      "prediction_time": "2025-10-04T00:00:00+00:00",
      "create_time": "2025-10-03T12:00:00+00:00",
      "type": "t2m",
      "value_min": 289.84,
      "value_max": 289.84,
      "path": "data/cfs/flxf2025100400.01.2025100312.grb2"
    },
    ...
  ]
}
```

---

## ğŸ› ï¸ å¯åŠ¨/é‡å¯å‘½ä»¤

### å¯åŠ¨å‰ç«¯
```bash
cd /home/mjl/nasa/weatherproject/frontend
npm run dev
```

### é‡å¯å‰ç«¯
```bash
cd /home/mjl/nasa/weatherproject/frontend
pkill -f "next-server"
npm run dev
```

### æŸ¥çœ‹æ—¥å¿—
```bash
tail -f /tmp/frontend.log
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### å˜é‡æ˜ å°„
å‰ç«¯å˜é‡åä¼šè‡ªåŠ¨æ˜ å°„åˆ°åç«¯å˜é‡åï¼š

| å‰ç«¯æ˜¾ç¤ºå | åç«¯å˜é‡å |
|-----------|-----------|
| Temperature | t2m |
| Wind | u10 |
| Pressure | pres |
| Humidity | rh |

### åæ ‡è½¬æ¢
- å‰ç«¯ä½¿ç”¨ `-180~180` ç»åº¦èŒƒå›´
- åç«¯ä½¿ç”¨ `0~360` ç»åº¦èŒƒå›´
- **è‡ªåŠ¨è½¬æ¢**ï¼š`lon_0_360 = lon < 0 ? lon + 360 : lon`

### æŸ¥è¯¢èŒƒå›´
- ä»¥é€‰ä¸­åæ ‡ä¸ºä¸­å¿ƒ
- **çº¬åº¦èŒƒå›´**: Â±0.5åº¦
- **ç»åº¦èŒƒå›´**: Â±0.5åº¦

---

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°
- [x] çœŸå®åç«¯ API é›†æˆ
- [x] å¤šå˜é‡æŸ¥è¯¢ï¼ˆå¾ªç¯è°ƒç”¨ï¼‰
- [x] åæ ‡é€‰æ‹©ï¼ˆåœ°å›¾ç‚¹å‡» + æ‰‹åŠ¨è¾“å…¥ï¼‰
- [x] æ—¶é—´èŒƒå›´æŸ¥è¯¢
- [x] ç»“æœå±•ç¤º
- [x] é”™è¯¯å¤„ç†
- [x] è‡ªåŠ¨åæ ‡è½¬æ¢ï¼ˆ-180~180 â†” 0~360ï¼‰

### ğŸ”„ æŸ¥è¯¢æµç¨‹
1. ç”¨æˆ·é€‰æ‹©åæ ‡å’Œå‚æ•°
2. å‰ç«¯æ„å»ºæŸ¥è¯¢ payload
3. å¾ªç¯è°ƒç”¨åç«¯ APIï¼ˆæ¯ä¸ªå˜é‡ä¸€æ¬¡ï¼‰
4. åˆå¹¶æ‰€æœ‰ç»“æœ
5. è½¬æ¢ä¸ºå‰ç«¯æ ¼å¼
6. åœ¨ Results Panel æ˜¾ç¤º

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: é¡µé¢æ— æ³•è®¿é—®
**æ£€æŸ¥**: å‰ç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
```bash
ps aux | grep next-server
```
**è§£å†³**: é‡å¯å‰ç«¯æœåŠ¡
```bash
cd /home/mjl/nasa/weatherproject/frontend && npm run dev
```

### é—®é¢˜ 2: API è°ƒç”¨å¤±è´¥
**æ£€æŸ¥**: åç«¯ API æ˜¯å¦å¯è®¿é—®
```bash
curl -s 'https://o.qiaoruntao.com:4567/api/api/query-data' \
  -H 'content-type: application/json' \
  -d '{"start_iso":"2025-10-04T00:00:00","end_iso":"2025-10-04T23:59:59","lon_min_0_360":280.8,"lon_max_0_360":281.8,"lat_min":43.6,"lat_max":44.6,"variable":"t2m","level":"heightAboveGround"}'
```

### é—®é¢˜ 3: åœ°å›¾ä¸æ˜¾ç¤º
**åŸå› **: Google Maps API Key æ— æ•ˆ
**æ£€æŸ¥**: `.env.local` ä¸­çš„ `NEXT_PUBLIC_GOOGLE_MAPS_API_KEY`

### é—®é¢˜ 4: è¿”å›ç©ºæ•°æ®
**åŸå› **: 
- é€‰æ‹©çš„æ—¶é—´èŒƒå›´æ²¡æœ‰æ•°æ®
- é€‰æ‹©çš„åæ ‡ä½ç½®æ²¡æœ‰æ•°æ®
**è§£å†³**: å°è¯•ä¸åŒçš„æ—¥æœŸæˆ–åæ ‡

---

## ğŸ“ å¼€å‘è€…å·¥å…·

### æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Network** æ ‡ç­¾
3. æ‰§è¡ŒæŸ¥è¯¢
4. æŸ¥çœ‹ `query-data` è¯·æ±‚çš„è¯¦æƒ…

### æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Console** æ ‡ç­¾
3. æŸ¥çœ‹è¯¦ç»†çš„æŸ¥è¯¢æ—¥å¿—

---

## ğŸ‰ æˆåŠŸæ ‡å‡†

å‰ç«¯æ­£å¸¸è¿è¡Œçš„æ ‡å¿—ï¼š
- âœ… å¯ä»¥è®¿é—® `http://localhost:3000`
- âœ… åœ°å›¾æ­£å¸¸æ˜¾ç¤º
- âœ… å¯ä»¥é€‰æ‹©åæ ‡
- âœ… å¯ä»¥è®¾ç½®æŸ¥è¯¢å‚æ•°
- âœ… ç‚¹å‡» Query åè¿”å›çœŸå®æ•°æ®
- âœ… Results Panel æ˜¾ç¤ºæ•°æ®
- âœ… æ§åˆ¶å°æ— é”™è¯¯ä¿¡æ¯

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. å‰ç«¯æ—¥å¿—: `/tmp/frontend.log`
2. æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
3. ç½‘ç»œè¯·æ±‚è¯¦æƒ…ï¼ˆNetwork æ ‡ç­¾ï¼‰

---

**æœ€åæ›´æ–°**: 2025-10-05
**å‰ç«¯ç‰ˆæœ¬**: Next.js 14.2.33
**åç«¯ API**: https://o.qiaoruntao.com:4567/api
